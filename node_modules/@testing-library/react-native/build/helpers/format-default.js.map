{"version":3,"file":"format-default.js","names":["_reactNative","require","propsToDisplay","defaultMapProps","props","result","styles","StyleSheet","flatten","style","styleToDisplay","extractStyle","undefined","accessibilityState","removeUndefinedKeys","accessibilityValue","forEach","propName","isObject","value","Array","isArray","prop","hasKeys","Object","entries","key","display","opacity","hasAnyKeys","keys","length"],"sources":["../../src/helpers/format-default.ts"],"sourcesContent":["import { StyleSheet, ViewStyle } from 'react-native';\n\nconst propsToDisplay = [\n  'accessible',\n  'accessibilityElementsHidden',\n  'accessibilityHint',\n  'accessibilityLabel',\n  'accessibilityLabelledBy',\n  'accessibilityRole',\n  'accessibilityViewIsModal',\n  'aria-busy',\n  'aria-checked',\n  'aria-disabled',\n  'aria-expanded',\n  'aria-hidden',\n  'aria-label',\n  'aria-labelledby',\n  'aria-modal',\n  'aria-selected',\n  'aria-valuemax',\n  'aria-valuemin',\n  'aria-valuenow',\n  'aria-valuetext',\n  'defaultValue',\n  'importantForAccessibility',\n  'nativeID',\n  'placeholder',\n  'role',\n  'testID',\n  'title',\n  'value',\n] as const;\n\n/**\n * Preserve props that are helpful in diagnosing test failures, while stripping rest\n */\nexport function defaultMapProps(\n  props: Record<string, unknown>\n): Record<string, unknown> {\n  const result: Record<string, unknown> = {};\n\n  const styles = StyleSheet.flatten(props.style as ViewStyle);\n  const styleToDisplay = extractStyle(styles);\n  if (styleToDisplay !== undefined) {\n    result.style = styleToDisplay;\n  }\n\n  const accessibilityState = removeUndefinedKeys(props.accessibilityState);\n  if (accessibilityState !== undefined) {\n    result.accessibilityState = accessibilityState;\n  }\n\n  const accessibilityValue = removeUndefinedKeys(props.accessibilityValue);\n  if (accessibilityValue !== undefined) {\n    result.accessibilityValue = accessibilityValue;\n  }\n\n  propsToDisplay.forEach((propName) => {\n    if (propName in props) {\n      result[propName] = props[propName];\n    }\n  });\n\n  return result;\n}\n\nfunction isObject(value: unknown): value is Record<string, unknown> {\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\nfunction removeUndefinedKeys(prop: unknown) {\n  if (!isObject(prop)) {\n    return prop;\n  }\n\n  let hasKeys = false;\n  const result: Record<string, unknown> = {};\n  Object.entries(prop).forEach(([key, value]) => {\n    if (value !== undefined) {\n      result[key] = value;\n      hasKeys = true;\n    }\n  });\n\n  return hasKeys ? result : undefined;\n}\n\nfunction extractStyle(style: ViewStyle | undefined) {\n  if (style == null) {\n    return undefined;\n  }\n\n  const result: Record<string, unknown> = {};\n  if (style.display === 'none') {\n    result.display = 'none';\n  }\n\n  if (style.opacity === 0) {\n    result.opacity = 0;\n  }\n\n  const hasAnyKeys = Object.keys(result).length > 0;\n  return hasAnyKeys ? result : undefined;\n}\n"],"mappings":"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"}